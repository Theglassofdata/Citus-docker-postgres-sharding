# Citus Cluster with Streaming Replication and Connection Pool (Docker Compose)

Welcome to the **Citus Cluster Project** repository! ğŸš€  
This project demonstrates **how to deploy a scalable and highly available Postgres ecosystem** using **Docker Compose**.  
The architecture comprises:

- **Citus** for distributed scaling.
- **Streaming Replication** for redundancy and failover.
- **PgBouncer** for lightweight connection pooling.
- **etcd** for service coordination.

This portfolio piece highlights industry best practices for:
- Database Sharding
- High Availability
- Connection Pooling
- Container Orchestration
- Failover Mechanisms
- Docker Compose Operations

---

## ğŸ“– Project Overview

This project involves:

1ï¸âƒ£ **Designing a scalable architecture** for Postgres with Citus for horizontal scaling.  
2ï¸âƒ£ **Setting up Streaming Replication** to enable failover and redundancy.  
3ï¸âƒ£ **Installing PgBouncer** to efficiently handle numerous client connections.  
4ï¸âƒ£ **Using etcd** to manage service configuration and orchestration.  
5ï¸âƒ£ **Docker Compose** to spin up all components quickly and easily.

---

## ğŸ›  Important Tools:

âœ… **Docker Compose:** Orchestrate multi-container services with ease.  
âœ… **Citus:** Enables scaling Postgres horizontally.  
âœ… **PgBouncer:** Connection pooler to efficiently handle numerous database sessions.  
âœ… **etcd:** Reliable key-value store for service coordination.  
âœ… **Postgres:** The base relational database.  

---

## ğŸš€ Project Requirements

### Cluster Setup (Docker Compose)

â¥ **Coordinator:** Acts as the main node for Citus.  
â¥ **Workers:** Handle shards and execute distributed workloads.  
â¥ **Replicas:** Standby nodes configured for physical streaming.  
â¥ **PgBouncer:** Connection pool to handle large number of client requests.  
â¥ **etcd:** Stores service configuration and health information.

---

## ğŸ¹ Operations Performed

âœ… Cluster initialized successfully with **Docker Compose**.  
âœ… Citus **coordinator and workers were up and healthy**.  
âœ… Standby nodes were configured for **streaming replication**.  
âœ… PgBouncer initialized to handle all client requests through a pool.  
âœ… etcd provided service orchestration and metadata storage.  

---

## ğŸ¹ Access

â¥ To connect directly to the **Coordinator**:

```shell
psql -h localhost -p 5432 -U postgres -d postgres

â¥ To connect through PgBouncer:
psql -h localhost -p 6432 -U postgres -d postgres

ğŸ¹ Architectural Diagram
![Add your architecture screenshot here]

ğŸ¹ Cluster Summary (Docker Compose)

â¥ coordinator_citus (Primary, port 5432)

â¥ worker_citus1 (Primary, port 5432)

â¥ worker_citus2 (Primary, port 5432)

â¥ worker_citus1_standby (Standby for worker 1, port 5432)

â¥ worker_citus2_standby (Standby for worker 2, port 5432)

â¥ pgbouncer (connection pool, port 6432)

â¥ etcd (coordination service)


ğŸ›¡ License
This project is licensed under the MIT License.
You are free to use, modify, and share this project with proper attribution.

ğŸŒŸ About Me
Hi there! I'm Rahul Raj
Let's connect and collaborate on future data-intensive projects!
LinkedIn | Github | Portfolio

yaml
Copy
Edit

---

âœ… Now you can:

â¥ **Save this directly as `README.md` in your repository.**  
â¥ **Add your screenshots:**  
Simply put your `.png` files under `docs/` and update the `![Add your architecture screenshot here]` path.

â¥ Push it to Git and you have a polished, portfolio-ready Citus Cluster project!

---

If you'd like, I can:

- Provide you a directory structure with files you should create.
- Give you a complete `docker-compose.yaml`.
- Provide you a sample `init-citus.sql`.

Just let me know! ğŸŒŸ


